**2026.02.17 20:00** Работа с контейнеризацией 

# PostgreSQL + Docker: загрузка дампа

## 1. Bind-mount

- Использован `-v S:\docker\big_dumps:/import`
- Контейнер видит локальный файл без копирования
- Файл физически остаётся на диске S:
- Проверен размер файла внутри контейнера (~477M)

## 2. Кастомный ENTRYPOINT

- Создан `check.sh`
- ENTRYPOINT переопределён
- Скрипт:
  - проверяет наличие файла
  - запускает стандартный `docker-entrypoint.sh`
  - использует `exec` для корректной передачи процесса

## 3. Загрузка SQL-дампа

- Формат дампа: `.sql.gz`
- Использована потоковая загрузка:
  
  gunzip -c demo.sql.gz | psql -U postgres

- Дамп создаёт базу `demo`
- При повторном запуске база пересоздаётся

## 4. Проверка внешнего источника

- Проверена доступность URL через `curl -I`
- Получен `HTTP 200`
- Размер файла ~1.17GB
- Контейнер сможет скачать файл через `curl -L`

## 5. Лицензия

- MIT-подобная лицензия
- Разрешено использование, копирование, модификация и распространение
- Требуется сохранение текста лицензии
- Без гарантий ("AS IS")

## 6. Архитектурный вывод

- Дамп не вшивается в образ
- Образ остаётся лёгким
- Данные могут:
  - монтироваться локально
  - скачиваться из интернета
- Контейнер может автоматически разворачивать базу при старте

**2026.02.17 13:57** Переход на wsl 2

## Цель
Перевести существующие дистрибутивы WSL с версии 1 на версию 2.

---

## Проверка текущего состояния
Команда:
wsl -l -v

Результат:
Обнаружено 3 дистрибутива.
Часть работала на WSL 1.

---

## Подготовка окружения
Включены компоненты:
- Microsoft-Windows-Subsystem-Linux
- VirtualMachinePlatform

Перезагрузка системы выполнена.

---

## Установка версии по умолчанию
Команда:
wsl --set-default-version 2

---

## Конвертация дистрибутивов
Команда:
wsl --set-version <ИмяДистрибутива> 2

Процесс:
- Создан виртуальный диск ext4.vhdx
- Выполнена миграция файловой системы
- Дистрибутив переведён в режим полноценной VM

---

## Проверка
Команда:
wsl -l -v

Результат:
Все целевые дистрибутивы переведены на WSL 2.

---

## Техническое изменение
Файловая система:
WSL1 → прямой доступ к NTFS
WSL2 → ext4 внутри виртуального диска (.vhdx)

---

Статус: переход завершён.

**2026.02.17 11:55** Щупаем wsl 1

# Щупаем WSL 1

## 10:00–10:20
- Разобрал различия WSL 1 vs WSL 2  
- WSL2 = ext4.vhdx + виртуализация  
- WSL1 = файловая система напрямую в NTFS  

## 10:20–10:35
- Нашёл расположение дистрибутива через реестр  
  `HKCU\Software\Microsoft\Windows\CurrentVersion\Lxss`
- Определил реальный путь к ext4.vhdx  

## 10:35–10:50
- Попытка копирования папки вручную → нельзя  
- Освоил безопасный способ: `wsl --export`  

## 10:50–11:10
- Удаление через `wsl --unregister`
- Разобрал зависание удаления  
  (`wsl --shutdown`, перезапуск LxssManager, reboot)

## 11:10–11:25
- Чистая установка Ubuntu  
- Ошибка 0x80370114 → отсутствие виртуализации  

## 11:25–11:40
- Принудительная установка WSL1  
- Установка Debian  
- Создание UNIX-пользователя  

## 11:40–11:50
- Проверка версии: `wsl -l -v`
- Проверка ОС: `cat /etc/os-release`
- Проверка ядра: `uname -a`

---

## Выводы

- WSL2 тяжелее, требует hypervisor  
- WSL1 проще и компактнее  
- Debian меньше по размеру, чем Ubuntu  
- Перемещение дистрибутива только через export/import  
- Ручное копирование каталога WSL опасно

**2026.02.15 07:44** Старт docker-логирования
